<?xml version="1.0"?>
<odoo>
<!--   contacts quotation button action-->
        <record id="sale.act_res_partner_2_sale_order" model="ir.actions.act_window">
            <field name="name">Quotations</field>
            <field name="res_model">sale.order</field>
            <field name="view_mode">tree,form,graph</field>
            <field name="domain">[('state', '=', 'quotation')]</field>
            <field name="context">{'search_default_partner_id': active_id, 'default_partner_id': active_id}</field>
            <field name="groups_id" eval="[(4, ref('sales_team.group_sale_salesman'))]"/>
            <field name="help" type="html">
              <p class="o_view_nocontent_smiling_face">
                Create a new quotation, the first step of a new sale!
              </p><p>
                Once the quotation is confirmed by the customer, it becomes a sales order.<br/> You will be able to create an invoice and collect the payment.
              </p>
            </field>
        </record>

<!--    contacts quotations action&#45;&#45;og comment-->
<!--        <record id="act_res_partner_2_quotation" model="ir.actions.act_window">-->
<!--            <field name="name">Quotations and Sales</field>-->
<!--            <field name="res_model">sale.order</field>-->
<!--            <field name="view_mode">tree,form,graph</field>-->
<!--&lt;!&ndash;            <field name="domain">[('state', '=', 'quotation')]</field>&ndash;&gt;-->
<!--            <field name="domain">[('state', '=', 'sale')]</field>-->
<!--            <field name="context">{'search_default_partner_id': active_id, 'default_partner_id': active_id}</field>-->
<!--            <field name="groups_id" eval="[(4, ref('sales_team.group_sale_salesman'))]"/>-->
<!--            <field name="help" type="html">-->
<!--              <p class="o_view_nocontent_smiling_face">-->
<!--                Create a new quotation, the first step of a new sale!-->
<!--              </p><p>-->
<!--                Once the quotation is confirmed by the customer, it becomes a sales order.<br/> You will be able to create an invoice and collect the payment.-->
<!--              </p>-->
<!--            </field>-->
<!--        </record>-->

<!--    contacts sale action-->
        <record id="action_orders_custom" model="ir.actions.act_window">
        <field name="name">Sales Orders</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">sale.order</field>
        <field name="view_mode">tree,kanban,form,calendar,pivot,graph,activity</field>
        <field name="search_view_id" ref="sale.sale_order_view_search_inherit_sale"/>
        <field name="context">{'default_is_waiting_for_approval':True ,'search_default_partner_id': active_id,'default_partner_id': active_id,'default_state':'sdraft'}</field>
        <field name="domain">[('state', '=', ('sale','approve','reject','sdraft'))]</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Create a new quotation, the first step of a new sale!
            </p>
            <p>
                Once the quotation is confirmed, it becomes a sales order.
                <br/>
                You will be able to create an invoice and collect the payment.
            </p>
        </field>
    </record>

    <record id="res_partner_view_buttons_custom" model="ir.ui.view">
            <field name="name">res.partner.view.buttons.custom</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="sale.res_partner_view_buttons" />
            <field name="priority" eval="3"/>
            <field name="groups_id" eval="[(4, ref('sales_team.group_sale_salesman'))]"/>
            <field name="arch" type="xml">
                <xpath expr="//button[@name='%(sale.act_res_partner_2_sale_order)d']" position="after">
                    <button class="oe_stat_button" type="action" name="%(contacts_custom.action_orders_custom)d"
                            groups="sales_team.group_sale_salesman" string="Sales"
                            icon="fa-usd">
                    </button>
                </xpath>

                <xpath expr="//button[@name='%(sale.act_res_partner_2_sale_order)d']" position="replace">
                    <button class="oe_stat_button" type="action" name="%(sale.act_res_partner_2_sale_order)d"
                            groups="sales_team.group_sale_salesman" string="Quotation"
                            icon="fa-usd">
<!--                            <field string="Sales" name="sale_order_count" widget="statinfo"/>-->
                    </button>
                </xpath>
            </field>
    </record>

    <record id="view_order_tree" model="ir.ui.view">
        <field name="name">sale.order.tree.inherit.sale.stock</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_order_tree"/>
<!--         <field name="domain">[('state', '=', ('sale','approve','reject','sdraft'))]</field>-->
        <field name="arch" type="xml">
            <xpath expr="//field[@name='state']" position="replace">
                <field name="state"/>
            </xpath>
        </field>
    </record>

</odoo>
